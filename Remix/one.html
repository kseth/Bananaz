<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=utf-8>
</head>

<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="wavesurfer.js"></script>
<script src="drawer.js"></script>
<script type="text/javascript" src='remix.js'></script>
<script type="text/javascript">

// First-beat extraction and assembly
var apiKey = 'IJMOFOATE6IHSZVFT'; //echoNest api key
var soundCloudApiKey = '7f3d2944e383b89225583a4a8ad4dac1'; //soundcloud client id key

var remixer;
var player;
var track;
var remixed;

function init(){
    if (window.webkitAudioContext === undefined) {
        error("Sorry, this app needs advanced web audio. Your browser doesn't"
            + " support it. Try the latest version of Chrome");
    } else {

        // initialize the waveform object
        var wavesurfer = Object.create(WaveSurfer);
            wavesurfer.init({
                canvas: document.querySelector('#wave'),
        	    waveColor: 'violet',
        	    progressColor: 'purple',
             loadingColor: 'purple',
             cursorColor: 'navy'
            });


	// initialize the web audio player
        var context = new webkitAudioContext();
        remixer = createJRemixer(context, $, apiKey);
        player = remixer.getPlayer();
        $("#info").text("Please enter a SoundCloud URL");

	$("#soundcloud-submit").click(function() {

	$("#info").text("Getting data from SoundCloud...");
	var soundCloudURL = $("#soundcloud-url").val();

        	remixer.remixTrackBySoundCloudURL(soundCloudURL, soundCloudApiKey, function(t, percent) {
        	    track = t;

        	    $("#info").text(percent + "% of the track loaded");
        	    if (percent == 100) {
        	        $("#info").text(percent + "% of the track loaded, remixing...");
        	    }

        	    if (track.status == 'ok') {
		    	remixed = new Array();
			
			var meter = parseInt(track.analysis.track.time_signature);

			console.log("starting length: "+track.analysis.beats.length);

        	        // Do the remixing here!
        	        for (var i=0; i < track.analysis.beats.length; i++) {
        	            switch (i % meter) {
			    	case 0: remixed.push(track.analysis.beats[i]);
					remixed.push(track.analysis.beats[i]);
					break;
				case 1: break;
				case 2: remixed.push(track.analysis.beats[i]);
					remixed.push(track.analysis.beats[i-1]);
					break;
				default:remixed.push(track.analysis.beats[i]);
					break;
        	            }
        	        }

			//load the remix into the waveform
		        wavesurfer.loadBuffer(remixed);
        	        
			$("#info").text("Remix complete!");

                        // Handle play and stop now that remix complete 
                        $("#play").click(function  () {
                            console.log("starts playing");
                            player.stop(); player.play(0, track.analysis.beats);
                        });
   
                        $("#stop").click(function () {
                            console.log("stop playing");
                            player.stop();
                        });

			console.log("ending length: "+remixed.length);
        	    }
        	});

	});
    }
}

window.onload = init;
</script>

Welcome to One.html

<div id="info"></div>
<div id="textbox-div">
    <input type="text" id="soundcloud-url" />
    <input type="submit" id="soundcloud-submit" value="Remix!" />
</div>


<!-- This is the waveform div with play and stop buttons-->
<div id='waveform'>
<h2>Remixed Track</h2>
<canvas id='wave' width='1024px' height='100px'></canvas>
<br />
<button id="play" class='btn btn-inverse btn-original' >Play!</button>
<button id="stop"class='btn btn-original'>Stop!</button>
</div>

</html>
